angular.module("connectedCarSDK",["connectedCarSDK.attAlert","connectedCarSDK.attBadge","connectedCarSDK.attButtons","connectedCarSDK.attCarousel","connectedCarSDK.attContent","connectedCarSDK.attDrawer","connectedCarSDK.attDropdown","connectedCarSDK.attFooter","connectedCarSDK.attHeader","connectedCarSDK.attListView","connectedCarSDK.attLoader","connectedCarSDK.attMediaPlayer","connectedCarSDK.attMenu","connectedCarSDK.attModal","connectedCarSDK.attPinPad","connectedCarSDK.attProgressBar","connectedCarSDK.attSimError","connectedCarSDK.attSlider","connectedCarSDK.attTab","connectedCarSDK.attTabset","connectedCarSDK.attToggleSwitch","connectedCarSDK.attVehicleInMotion","connectedCarSDK.transition"]),angular.module("connectedCarSDK.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function($q,$timeout,$rootScope){function findEndEventName(endEventNames){for(var name in endEventNames)if(void 0!==transElement.style[name])return endEventNames[name]}var $transition=function(element,trigger,options){options=options||{};var deferred=$q.defer(),endEventName=$transition[options.animation?"animationEndEventName":"transitionEndEventName"],transitionEndHandler=function(){$rootScope.$apply(function(){element.unbind(endEventName,transitionEndHandler),deferred.resolve(element)})};return endEventName&&element.bind(endEventName,transitionEndHandler),$timeout(function(){angular.isString(trigger)?element.addClass(trigger):angular.isFunction(trigger)?trigger(element):angular.isObject(trigger)&&element.css(trigger),endEventName||deferred.resolve(element)}),deferred.promise.cancel=function(){endEventName&&element.unbind(endEventName,transitionEndHandler),deferred.reject("Transition cancelled")},deferred.promise},transElement=document.createElement("trans"),transitionEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},animationEndEventNames={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return $transition.transitionEndEventName=findEndEventName(transitionEndEventNames),$transition.animationEndEventName=findEndEventName(animationEndEventNames),$transition}]),angular.module("connectedCarSDK.attAlert",[]).constant("alertConfig",{type:"info",max:100,min:0}).factory("alertProvider",["$timeout","alertConfig",function($timeout,alertConfig){return{alerts:[],timeoutPromise:null,addAlert:function(scope){scope.alert={type:angular.isDefined(scope.type)?scope.type:alertConfig.type,onClose:angular.isDefined(scope.onClose)?scope.onClose:null,onClick:angular.isDefined(scope.onClick)?scope.onClick:null,showIcon:angular.isDefined(scope.showIcon)?scope.showIcon:!1,showConfirmationBtn:angular.isDefined(scope.showConfirmationBtn)?scope.showConfirmationBtn:!1,buttonText:angular.isDefined(scope.buttonText)?scope.buttonText:"",autoCloseInterval:angular.isDefined(scope.autoCloseInterval)?scope.autoCloseInterval:null,title:angular.isDefined(scope.title)?scope.title:""},0===this.alerts.length&&(scope.alert.isActive=!0),this.alerts.push(scope.alert)},removeActiveAlert:function(){this.alerts[0].isActive=!1,this.alerts.splice(0,1),this.alerts.length>0&&(this.alerts[0].isActive=!0)},closeAlert:function(){this.timeoutPromise&&$timeout.cancel(this.timeoutPromise),this.alerts[0].onClose(),this.removeActiveAlert(),this.handleAutoClose()},handleAutoClose:function(){if(this.alerts[0]&&this.alerts[0].autoCloseInterval&&parseInt(this.alerts[0].autoCloseInterval)>0){var that=this;this.timeoutPromise=$timeout(function(){that.closeAlert()},this.alerts[0].autoCloseInterval)}}}}]).factory("$alert",["$rootScope","$compile","$document",function($rootScope,$compile,$document){return{show:function(options){var angularDomEl=angular.element('<att-alert on-close="onClose()" on-click="onClick()">'+options.text+"</att-alert>");angularDomEl.attr({type:options.type,title:options.title,"show-icon":options.showIcon,"show-confirmation-btn":options.showConfirmationBtn,"button-text":options.buttonText,"auto-close-interval":options.autoCloseInterval?options.autoCloseInterval:null});var alertScope=$rootScope.$new(!1);alertScope.onClose=options.onClose?options.onClose:null,alertScope.onClick=options.onClick?options.onClick:null;var alertDomEl=$compile(angularDomEl)(alertScope);$document.find("body").eq(0).append(alertDomEl)},info:function(options){options.type="info",this.show(options)},success:function(options){options.type="success",this.show(options)},danger:function(options){options.type="danger",this.show(options)}}}]).directive("attAlert",["alertProvider",function(alertProvider){return{restrict:"AE",templateUrl:"templates/attAlert.html",replace:!0,transclude:!0,scope:{type:"@",showIcon:"=",showConfirmationBtn:"=",buttonText:"@",onClick:"&",onClose:"&",autoCloseInterval:"=",title:"@",text:"@"},link:function(scope){alertProvider.addAlert(scope),scope.alert.isActive&&alertProvider.handleAutoClose(),scope.close=function(){scope.showConfirmationBtn||alertProvider.closeAlert()},scope.btnClick=function(){scope.onClick(),alertProvider.closeAlert()},scope.$on("$destroy",function(){scope.alert.isActive&&alertProvider.closeAlert()})}}}]),angular.module("connectedCarSDK.attBadge",[]).directive("attBadge",function(){return{templateUrl:"templates/attBadge.html",restrict:"E",replace:!0,scope:{value:"@",badgeType:"@"},link:function(){}}}),angular.module("connectedCarSDK.attButtons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(buttonConfig){this.activeClass=buttonConfig.activeClass||"active",this.toggleEvent=buttonConfig.toggleEvent||"click"}]).directive("attBtnRadio",function(){return{require:["attBtnRadio","ngModel"],controller:"ButtonsController",link:function(scope,element,attrs,ctrls){var buttonsCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl.$render=function(){element.toggleClass(buttonsCtrl.activeClass,angular.equals(ngModelCtrl.$modelValue,scope.$eval(attrs.attBtnRadio)))},element.bind(buttonsCtrl.toggleEvent,function(){var isActive=element.hasClass(buttonsCtrl.activeClass);(!isActive||angular.isDefined(attrs.uncheckable))&&scope.$apply(function(){ngModelCtrl.$setViewValue(isActive?null:scope.$eval(attrs.attBtnRadio)),ngModelCtrl.$render()})})}}}).directive("attBtnCheckbox",function(){return{require:["attBtnCheckbox","ngModel"],controller:"ButtonsController",link:function(scope,element,attrs,ctrls){function getTrueValue(){return getCheckboxValue(attrs.attBtnCheckboxTrue,!0)}function getFalseValue(){return getCheckboxValue(attrs.attBtnCheckboxFalse,!1)}function getCheckboxValue(attributeValue,defaultValue){var val=scope.$eval(attributeValue);return angular.isDefined(val)?val:defaultValue}var buttonsCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl.$render=function(){element.toggleClass(buttonsCtrl.activeClass,angular.equals(ngModelCtrl.$modelValue,getTrueValue()))},element.bind(buttonsCtrl.toggleEvent,function(){scope.$apply(function(){ngModelCtrl.$setViewValue(element.hasClass(buttonsCtrl.activeClass)?getFalseValue():getTrueValue()),ngModelCtrl.$render()})})}}}),angular.module("connectedCarSDK.attCarousel",["connectedCarSDK.transition"]).controller("CarouselController",["$scope","$timeout","$transition","$animate",function($scope,$timeout,$transition,$animate){function restartTimer(){resetTimer();var interval=+$scope.interval;!isNaN(interval)&&interval>=0&&(currentTimeout=$timeout(timerFn,interval))}function resetTimer(){currentTimeout&&($timeout.cancel(currentTimeout),currentTimeout=null)}function timerFn(){isPlaying?($scope.next(),restartTimer()):$scope.pause()}$animate.enabled(!1);var currentTimeout,isPlaying,self=this,slides=self.slides=$scope.slides=[],currentIndex=-1;self.currentSlide=null;var destroyed=!1;self.select=$scope.select=function(nextSlide,direction){function goNext(){destroyed||(self.currentSlide&&angular.isString(direction)&&!$scope.noTransition&&nextSlide.$element?(nextSlide.$element.addClass(direction),nextSlide.$element[0].offsetWidth=nextSlide.$element[0].offsetWidth,angular.forEach(slides,function(slide){angular.extend(slide,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(nextSlide,{direction:direction,active:!0,entering:!0}),angular.extend(self.currentSlide||{},{direction:direction,leaving:!0}),$scope.$currentTransition=$transition(nextSlide.$element,{}),function(next,current){$scope.$currentTransition.then(function(){transitionDone(next,current)},function(){transitionDone(next,current)})}(nextSlide,self.currentSlide)):transitionDone(nextSlide,self.currentSlide),self.currentSlide=nextSlide,currentIndex=nextIndex,restartTimer())}function transitionDone(next,current){angular.extend(next,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(current||{},{direction:"",active:!1,leaving:!1,entering:!1}),$scope.$currentTransition=null}var nextIndex=slides.indexOf(nextSlide);void 0===direction&&(direction=nextIndex>currentIndex?"next":"prev"),nextSlide&&nextSlide!==self.currentSlide&&($scope.$currentTransition?($scope.$currentTransition.cancel(),$timeout(goNext)):goNext())},$scope.$on("$destroy",function(){destroyed=!0}),self.indexOfSlide=function(slide){return slides.indexOf(slide)},$scope.next=function(){var newIndex=(currentIndex+1)%slides.length;return $scope.$currentTransition?void 0:self.select(slides[newIndex],"next")},$scope.prev=function(){var newIndex=0>currentIndex-1?slides.length-1:currentIndex-1;return $scope.$currentTransition?void 0:self.select(slides[newIndex],"prev")},$scope.isActive=function(slide){return self.currentSlide===slide},$scope.$watch("interval",restartTimer),$scope.$on("$destroy",resetTimer),$scope.play=function(){isPlaying||(isPlaying=!0,restartTimer())},$scope.pause=function(){$scope.noPause||(isPlaying=!1,resetTimer())},self.addSlide=function(slide,element){slide.$element=element,slides.push(slide),1===slides.length||slide.active?(self.select(slides[slides.length-1]),1===slides.length&&$scope.play()):slide.active=!1},self.removeSlide=function(slide){var index=slides.indexOf(slide);slides.splice(index,1),slides.length>0&&slide.active?self.select(index>=slides.length?slides[index-1]:slides[index]):currentIndex>index&&currentIndex--}}]).directive("attCarousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"templates/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("attSlide",function(){return{require:"^attCarousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"templates/carousel/slide.html",scope:{active:"=?"},link:function(scope,element,attrs,carouselCtrl){carouselCtrl.addSlide(scope,element),scope.$on("$destroy",function(){carouselCtrl.removeSlide(scope)}),scope.$watch("active",function(active){active&&carouselCtrl.select(scope)})}}}),angular.module("connectedCarSDK.attContent",[]).directive("attContent",[function(){return{restrict:"E",transclude:!0,replace:!0,templateUrl:"templates/attContent.html",link:function(scope,element,attrs){attrs.$observe("hasHeader",function(value){"true"===value?element.addClass("has-header"):element.removeClass("has-header")}),attrs.$observe("hasFooter",function(value){"true"===value?element.addClass("has-footer"):element.removeClass("has-footer")}),attrs.$observe("backgroundImg",function(value){element.css("background","url("+value+") no-repeat center center fixed"),element.css("-webkit-background-size","cover"),element.css("-moz-background-size","cover"),element.css("-o-background-size","cover"),element.css("background-size","cover")})}}}]),angular.module("connectedCarSDK.attDrawer",[]).directive("attDrawer",["$rootScope",function($rootScope){return{restrict:"E",templateUrl:"templates/attDrawer.html",transclude:!0,scope:{},link:function(scope){scope.showDrawer=!1,scope.closeDrawer=function(){scope.showDrawer=!1},$rootScope.$on("changeDrawer",function(event,args){scope.showDrawer=args[0]})}}}]),angular.module("connectedCarSDK.attDropdown",[]).directive("attDropdown",["$timeout",function($timeout){return{restrict:"E",replace:!0,templateUrl:function(tElement,tAttrs){return tAttrs.templateUrl||"templates/attDropdown.html"},require:"^ngModel",scope:{ngModel:"=",defaultOption:"@",items:"=",closeButton:"@"},link:function(scope){scope.show=!1,null!==scope.ngModel&&void 0!==scope.ngModel&&$timeout(function(){scope.defaultOption=scope.ngModel.text}),scope.selectItem=function(item){scope.ngModel=item,scope.defaultOption=scope.ngModel.text,scope.show=!1}}}}]),angular.module("connectedCarSDK.attFooter",[]).directive("attFooter",function(){return{restrict:"E",transclude:!0,replace:!0,templateUrl:"templates/attFooter.html",link:function(scope,element,attrs){attrs.$observe("verticalAlignment",function(value){scope.alignment=value?value:"center"}),attrs.$observe("isFixed",function(value){value="undefined"!=typeof value?value:"true",scope.isFixed="true"===value?"footer-fixed":null})}}}),angular.module("connectedCarSDK.attHeader",[]).factory("$header",["$rootScope","$interval",function($rootScope,$interval){return{showBackButton:function(show,callback){var that=this;this.backButtonInterval=$interval(function(){$rootScope.$broadcast("showBackButton",[show,callback,function(){$interval.cancel(that.backButtonInterval)}])},100)}}}]).directive("attHeader",["$rootScope",function($rootScope){return{restrict:"E",templateUrl:"templates/attHeader.html",replace:!0,scope:{appName:"=",currentItem:"=",appImage:"@",showBackButton:"=",backButtonCallback:"&"},link:function(scope){scope.backButton=scope.showBackButton?scope.showBackButton:!1,scope.backCallback=scope.backButtonCallback?scope.backButtonCallback:null,scope.openMenu=function(){$rootScope.$broadcast("changeDrawer",[!0])},$rootScope.$on("showBackButton",function(event,args){scope.backButton=args[0],scope.backCallback=args[1],args[2]()})}}}]),angular.module("connectedCarSDK.attListView",[]).directive("attListView",function(){return{restrict:"E",templateUrl:"templates/attListView.html",replace:!0,scope:{items:"=",title:"=",multiSelect:"="},link:function(scope){scope.onItemClick=function(item){console.log("Selected item ",item),item.selected?item.selected=!1:scope.items&&scope.items.forEach(function(i){i===item?i.selected=!0:scope.multiSelect!==!0&&(i.selected=!1)})}}}}),angular.module("connectedCarSDK.attLoader",[]).factory("$loader",["$rootScope","$compile","$document","$timeout",function($rootScope,$compile,$document,$timeout){var getLoaderReference=function(){var loaderDomEl,allDivElements=$document.find("body").find("div");if(allDivElements&&angular.forEach(allDivElements,function(divEl){angular.element(divEl).hasClass("att-loader")&&(loaderDomEl=divEl)}),!loaderDomEl){var angularDomEl=angular.element("<att-loader></att-loader>"),alertScope=$rootScope.$new(!1);loaderDomEl=$compile(angularDomEl)(alertScope),$document.find("body").eq(0).append(loaderDomEl)}return loaderDomEl};return{show:function(){var loader=getLoaderReference();loader&&$timeout(function(){var scope=angular.element(loader).scope();scope.forceshow=!0},0)},hide:function(){var loader=getLoaderReference();loader&&$timeout(function(){var scope=angular.element(loader).scope();scope.forceshow=!1},0)}}}]).directive("attLoader",["$http",function($http){return{restrict:"E",replace:!0,templateUrl:"templates/attLoader.html",link:function(scope,element){scope.isLoading=function(){return $http.pendingRequests.length>0||scope.forceshow},scope.$watch(scope.isLoading,function(v){v?element.css("display","flex"):element.css("display","none")})}}}]),angular.module("connectedCarSDK.attMediaPlayer",[]).directive("attMediaPlayer",["$http","$interval","$timeout","$document",function($http,$interval,$timeout,$document){return{restrict:"E",replace:!0,templateUrl:function(tElement,tAttrs){return void 0===tAttrs.templateUrl?"templates/attMediaPlayer.html":tAttrs.templateUrl},scope:{playlist:"=",autoplay:"="},link:function(scope){function init(){if(scope.playlist&&scope.playlist.length>0){var audioEl=$document.find("body").find("audio");0===audioEl.length?(audioEl=document.createElement("audio"),scope.audio=audioEl):scope.audio=audioEl[0],$document.find("body").eq(0).append(audioEl),scope.audio.addEventListener("error",function(){console.log("error loading file"),scope.playlist[scope.currentIndex].isValid=!1,sliderInterval&&$interval.cancel(sliderInterval),scope.changeFile(1,!0)}),null!==scope.audio&&scope.audio.canPlayType&&scope.audio.canPlayType("audio/mpeg")&&(scope.audio.src=scope.playlist[scope.currentIndex].src,scope.autoplay&&startPlayer(!0))}}function startPlayer(reset){reset&&sliderInterval&&$interval.cancel(sliderInterval);var counter=0,maxValue=100,intervalDuration=$interval(function(){var isDurationAvailable=!isNaN(scope.audio.duration);(counter>=maxValue||isDurationAvailable)&&($interval.cancel(intervalDuration),isDurationAvailable&&(scope.audio.play(),setupSlider(reset))),counter++},50)}function setupSlider(reset){reset&&(scope.sliderConfig={min:0,max:scope.audio.duration,val:0,elapsedTime:0,remainingTime:scope.audio.duration},secondsleft=scope.audio.duration,secondsElapsed=0),sliderInterval&&$interval.cancel(sliderInterval),sliderInterval=$interval(function(){return 0===parseInt(secondsleft)?($interval.cancel(sliderInterval),void scope.changeFile(1)):(secondsleft--,secondsElapsed++,void scope.sliderConfig.val++)},1e3)}function setTime(){$timeout(function(){scope.audio.currentTime=scope.sliderConfig.val,secondsElapsed=scope.audio.currentTime,scope.sliderConfig.elapsedTime=secondsElapsed,secondsleft=scope.audio.duration-scope.sliderConfig.val,scope.sliderConfig.remainingTime=secondsleft},100)}function setVolume(){scope.audio.volume=scope.currentVolume/100}function change(manuallyChanged){return scope.validateSong()?(scope.audio.src=scope.playlist[scope.currentIndex].src,void(scope.audioPaused?(setupSlider(!0),setTime(),$interval.cancel(sliderInterval)):startPlayer(!0))):void scope.changeFile(1,manuallyChanged)}scope.audio=null,scope.sliderConfig={val:0},scope.currentIndex=0,scope.repeatActive=!1,scope.shuffleActive=!1,scope.audioPaused=!1,scope.showVolume=!1,scope.currentVolume=50,scope.minVolume=0,scope.maxVolume=100,scope.changeVolumeQuantity=10,scope.volumeSliderMovingInterval=null,scope.volumeInactive=!0,scope.volumeInactivityInterval=null,scope.volumeInativityTime=2e3;var changePositionInterval=5,changePositionTimeInterval=500,intervalpromise=null,secondsleft=0,secondsElapsed=0,sliderInterval=null,intervalCounter=0;init(),scope.$watchCollection("playlist",function(newPlaylist,oldPlaylist){!scope.playlist||oldPlaylist&&oldPlaylist.length>0||(init(),scope.changeFile(0))}),scope.$on("sliderMoved",function(event,message){"time"===message?setTime():"volume"===message&&(scope.volumeInactive=!1,setVolume(),$interval.cancel(scope.volumeSliderMovingInterval))}),scope.$on("sliderMoving",function(event,message){"volume"===message&&(scope.volumeInactive=!1,scope.volumeSliderMovingInterval=$interval(function(){scope.volumeInactive=!1},200))}),scope.countdown=function(isElapsed){var min,sec;isElapsed?(min=parseInt(secondsElapsed/60),sec=parseInt(secondsElapsed%60)):(min=parseInt(secondsleft/60),sec=parseInt(secondsleft%60)),1===min.toString().length&&(min="0"+min),1===sec.toString().length&&(sec="0"+sec),isElapsed?scope.sliderConfig.elapsedTime=min+":"+sec:scope.sliderConfig.remainingTime="-"+min+":"+sec},scope.changePosition=function(rewind,stop){if(stop)if($interval.cancel(intervalpromise),2>intervalCounter){var index=rewind?-1:1;intervalCounter=0,scope.changeFile(index,!0)}else intervalCounter=0;else intervalpromise=$interval(function(){intervalCounter++,intervalCounter>=2&&(rewind?scope.audio.currentTime<changePositionInterval?scope.audio.currentTime=0:scope.audio.currentTime-=changePositionInterval:scope.audio.duration-scope.audio.currentTime<changePositionInterval?scope.audio.currentTime=scope.audio.duration:scope.audio.currentTime+=changePositionInterval,scope.sliderConfig.val=scope.audio.currentTime,setTime())},changePositionTimeInterval)},scope.changeStatus=function(){scope.audioPaused=!scope.audioPaused,!scope.audio.paused&&scope.audio.duration>0?(scope.audio.pause(),$interval.cancel(sliderInterval)):startPlayer(!1)},scope.changeFile=function(index,manuallyChanged){if(scope.repeatActive)manuallyChanged&&(scope.currentIndex+=index),change(manuallyChanged);else if(!scope.repeatActive)if(scope.shuffleActive){for(var randomIndex=scope.currentIndex;randomIndex===scope.currentIndex;)randomIndex=Math.floor(Math.random()*scope.playlist.length+0);scope.currentIndex=randomIndex,change()}else scope.currentIndex+=index,change()},scope.validateSong=function(){return scope.playlist[scope.currentIndex]?scope.playlist[scope.currentIndex].isValid===!1?!1:!0:(scope.currentIndex=scope.playlist.length===scope.currentIndex?-1:scope.playlist.length-1,!1)},scope.volume=function(){scope.showVolume=!scope.showVolume,scope.showVolume?(scope.volumeInactivityInterval&&$interval.cancel(scope.volumeInactivityInterval),scope.volumeInactivityInterval=$interval(function(){scope.volumeInactive?(scope.showVolume=!1,$interval.cancel(scope.volumeInactivityInterval)):scope.volumeInactive=!0},scope.volumeInativityTime)):$interval.cancel(scope.volumeInactivityInterval)},scope.nextSong=function(){if(!scope.playlist)return!1;var index=scope.currentIndex;return scope.playlist.length===scope.currentIndex+1&&(index=-1),scope.playlist&&scope.playlist[index+1]},scope.currentSong=function(){return scope.playlist?scope.playlist[scope.currentIndex]:!1}}}}]),angular.module("connectedCarSDK.attMenu",[]).directive("attMenu",function($timeout,$rootScope){return{templateUrl:"templates/attMenu.html",restrict:"E",replace:!0,scope:{items:"=",title:"="},link:function(scope){scope.activeTemp=!1,scope.onItemClick=function(item){scope.items&&scope.items.forEach(function(i){i.selected=i===item?!0:!1})},$rootScope.$on("setMenuItem",function(event,args){scope.onItemClick(args[0])}),$rootScope.$on("changeDrawer",function(){$timeout(function(){scope.activeTemp=!0},500)})}}}),angular.module("connectedCarSDK.attModal",["connectedCarSDK.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var stack=[];return{add:function(key,value){stack.push({key:key,value:value})},get:function(key){for(var i=0;i<stack.length;i++)if(key===stack[i].key)return stack[i]},keys:function(){for(var keys=[],i=0;i<stack.length;i++)keys.push(stack[i].key);return keys},top:function(){return stack[stack.length-1]},remove:function(key){for(var idx=-1,i=0;i<stack.length;i++)if(key===stack[i].key){idx=i;break}return stack.splice(idx,1)[0]},removeTop:function(){return stack.splice(stack.length-1,1)[0]},length:function(){return stack.length}}}}}).directive("modalBackdrop",["$timeout",function($timeout){return{restrict:"EA",replace:!0,templateUrl:"templates/modal/backdrop.html",link:function(scope,element,attrs){scope.backdropClass=attrs.backdropClass||"",scope.animate=!1,$timeout(function(){scope.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function($modalStack,$timeout){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(tElement,tAttrs){return tAttrs.templateUrl||"templates/modal/window.html"},link:function(scope,element,attrs){element.addClass(attrs.windowClass||""),scope.size=attrs.size,$timeout(function(){scope.animate=!0,element[0].querySelectorAll("[autofocus]").length||element[0].focus()}),scope.close=function(evt){var modal=$modalStack.getTop();modal&&modal.value.backdrop&&"static"!==modal.value.backdrop&&evt.target===evt.currentTarget&&(evt.preventDefault(),evt.stopPropagation(),$modalStack.dismiss(modal.key,"backdrop click"))}}}}]).directive("modalTransclude",function(){return{link:function($scope,$element,$attrs,controller,$transclude){$transclude($scope.$parent,function(clone){$element.empty(),$element.append(clone)})}}}).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function($transition,$timeout,$document,$compile,$rootScope,$$stackedMap){function backdropIndex(){for(var topBackdropIndex=-1,opened=openedWindows.keys(),i=0;i<opened.length;i++)openedWindows.get(opened[i]).value.backdrop&&(topBackdropIndex=i);return topBackdropIndex}function removeModalWindow(modalInstance){var body=$document.find("body").eq(0),modalWindow=openedWindows.get(modalInstance).value;openedWindows.remove(modalInstance),removeAfterAnimate(modalWindow.modalDomEl,modalWindow.modalScope,300,function(){modalWindow.modalScope.$destroy(),body.toggleClass(OPENED_MODAL_CLASS,openedWindows.length()>0),checkRemoveBackdrop()})}function checkRemoveBackdrop(){if(backdropDomEl&&-1===backdropIndex()){var backdropScopeRef=backdropScope;removeAfterAnimate(backdropDomEl,backdropScope,150,function(){backdropScopeRef.$destroy(),backdropScopeRef=null}),backdropDomEl=void 0,backdropScope=void 0}}function removeAfterAnimate(domEl,scope,emulateTime,done){function afterAnimating(){afterAnimating.done||(afterAnimating.done=!0,domEl.remove(),done&&done())}scope.animate=!1;var transitionEndEventName=$transition.transitionEndEventName;if(transitionEndEventName){var timeout=$timeout(afterAnimating,emulateTime);domEl.bind(transitionEndEventName,function(){$timeout.cancel(timeout),afterAnimating(),scope.$apply()})}else $timeout(afterAnimating)}var backdropDomEl,backdropScope,OPENED_MODAL_CLASS="modal-open",openedWindows=$$stackedMap.createNew(),$modalStack={};return $rootScope.$watch(backdropIndex,function(newBackdropIndex){backdropScope&&(backdropScope.index=newBackdropIndex)}),$document.bind("keydown",function(evt){var modal;27===evt.which&&(modal=openedWindows.top(),modal&&modal.value.keyboard&&(evt.preventDefault(),$rootScope.$apply(function(){$modalStack.dismiss(modal.key,"escape key press")})))}),$modalStack.open=function(modalInstance,modal){openedWindows.add(modalInstance,{deferred:modal.deferred,modalScope:modal.scope,backdrop:modal.backdrop,keyboard:modal.keyboard});var body=$document.find("body").eq(0),currBackdropIndex=backdropIndex();if(currBackdropIndex>=0&&!backdropDomEl){backdropScope=$rootScope.$new(!0),backdropScope.index=currBackdropIndex;var angularBackgroundDomEl=angular.element("<div modal-backdrop></div>");angularBackgroundDomEl.attr("backdrop-class",modal.backdropClass),backdropDomEl=$compile(angularBackgroundDomEl)(backdropScope),body.append(backdropDomEl)}var angularDomEl=angular.element("<div modal-window></div>");angularDomEl.attr({"template-url":modal.windowTemplateUrl,"window-class":modal.windowClass,size:modal.size,index:openedWindows.length()-1,animate:"animate"}).html(modal.content);var modalDomEl=$compile(angularDomEl)(modal.scope);openedWindows.top().value.modalDomEl=modalDomEl,body.append(modalDomEl),body.addClass(OPENED_MODAL_CLASS)},$modalStack.close=function(modalInstance,result){var modalWindow=openedWindows.get(modalInstance);modalWindow&&(modalWindow.value.deferred.resolve(result),removeModalWindow(modalInstance))},$modalStack.dismiss=function(modalInstance,reason){var modalWindow=openedWindows.get(modalInstance);modalWindow&&(modalWindow.value.deferred.reject(reason),removeModalWindow(modalInstance))},$modalStack.dismissAll=function(reason){for(var topModal=this.getTop();topModal;)this.dismiss(topModal.key,reason),topModal=this.getTop()},$modalStack.getTop=function(){return openedWindows.top()},$modalStack}]).provider("$modal",function(){var $modalProvider={options:{backdrop:!1,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function($injector,$rootScope,$q,$http,$templateCache,$controller,$modalStack){function getTemplatePromise(options){return options.template?$q.when(options.template):$http.get(angular.isFunction(options.templateUrl)?options.templateUrl():options.templateUrl,{cache:$templateCache}).then(function(result){return result.data})}function getResolvePromises(resolves){var promisesArr=[];return angular.forEach(resolves,function(value){(angular.isFunction(value)||angular.isArray(value))&&promisesArr.push($q.when($injector.invoke(value)))}),promisesArr}var $modal={};return $modal.open=function(modalOptions){var modalResultDeferred=$q.defer(),modalOpenedDeferred=$q.defer(),modalInstance={result:modalResultDeferred.promise,opened:modalOpenedDeferred.promise,close:function(result){$modalStack.close(modalInstance,result)},dismiss:function(reason){$modalStack.dismiss(modalInstance,reason)}};if(modalOptions=angular.extend({},$modalProvider.options,modalOptions),modalOptions.resolve=modalOptions.resolve||{},!modalOptions.template&&!modalOptions.templateUrl)throw new Error("One of template or templateUrl options is required.");var templateAndResolvePromise=$q.all([getTemplatePromise(modalOptions)].concat(getResolvePromises(modalOptions.resolve)));return templateAndResolvePromise.then(function(tplAndVars){var modalScope=(modalOptions.scope||$rootScope).$new();modalScope.$close=modalInstance.close,modalScope.$dismiss=modalInstance.dismiss;var ctrlInstance,ctrlLocals={},resolveIter=1;modalOptions.controller&&(ctrlLocals.$scope=modalScope,ctrlLocals.$modalInstance=modalInstance,angular.forEach(modalOptions.resolve,function(value,key){ctrlLocals[key]=tplAndVars[resolveIter++]}),ctrlInstance=$controller(modalOptions.controller,ctrlLocals),modalOptions.controllerAs&&(modalScope[modalOptions.controllerAs]=ctrlInstance)),$modalStack.open(modalInstance,{scope:modalScope,deferred:modalResultDeferred,content:tplAndVars[0],backdrop:modalOptions.backdrop,keyboard:modalOptions.keyboard,backdropClass:modalOptions.backdropClass,windowClass:modalOptions.windowClass,windowTemplateUrl:modalOptions.windowTemplateUrl,size:modalOptions.size})},function(reason){modalResultDeferred.reject(reason)}),templateAndResolvePromise.then(function(){modalOpenedDeferred.resolve(!0)},function(){modalOpenedDeferred.reject(!1)}),modalInstance},$modal}]};return $modalProvider}),angular.module("connectedCarSDK.attPinPad",[]).factory("$pinPad",["$rootScope","$compile","$document",function($rootScope,$compile,$document){return{show:function(options){var pinPadDomEl=$document.find("body").find("att-pin-pad");pinPadDomEl&&pinPadDomEl.remove();var angularDomEl=angular.element('<att-pin-pad ng-model="ngModel" on-confirm="onConfirm(ngModel)"></att-pin-pad>');angularDomEl.attr({"num-digits":options.numDigits}),angularDomEl.attr({"template-url":options.templateUrl});var pinPadScope=$rootScope.$new(!1);pinPadScope.ngModel=options.ngModel||"",pinPadScope.onConfirm=options.onConfirm?options.onConfirm:null,pinPadDomEl=$compile(angularDomEl)(pinPadScope),$document.find("body").eq(0).append(pinPadDomEl)},close:function(){var pinPadDomEl=$document.find("body").find("att-pin-pad");pinPadDomEl&&pinPadDomEl.remove()}}}]).directive("attPinPad",function(){return{templateUrl:function(tElement,tAttrs){return tAttrs.templateUrl||"templates/attPinPad.html"},restrict:"EA",scope:{numDigits:"@",ngModel:"=",onConfirm:"&"},link:function(scope){scope.ngModel||(scope.ngModel="");var numberOfDigits=4;scope.numDigits&&(numberOfDigits=scope.numDigits),scope.backspace=function(){scope.ngModel&&scope.ngModel.length>0&&(scope.ngModel=scope.ngModel.slice(0,-1))},scope.appendToPin=function(val){val>=0&&scope.ngModel.length<numberOfDigits&&(scope.ngModel+=val.toString())},scope.isDisabled=function(){return scope.ngModel.length<numberOfDigits?!0:!1}}}}),angular.module("connectedCarSDK.attProgressBar",[]).constant("progressConfig",{animate:!0,max:100,min:0}).controller("ProgressController",["$scope","$attrs","progressConfig",function($scope,$attrs,progressConfig){var self=this,animate=angular.isDefined($attrs.animate)?$scope.$parent.$eval($attrs.animate):progressConfig.animate;this.bars=[],$scope.max=angular.isDefined($attrs.max)?$scope.$parent.$eval($attrs.max):progressConfig.max,$scope.min=angular.isDefined($attrs.min)?$scope.$parent.$eval($attrs.min):progressConfig.min,$scope.textLeft=angular.isDefined($attrs.textLeft)?$scope.$parent.$eval($attrs.textLeft):progressConfig.textLeft,$scope.textRight=angular.isDefined($attrs.textRight)?$scope.$parent.$eval($attrs.textRight):progressConfig.textRight,this.addBar=function(bar,element){animate||element.css({transition:"none"}),this.bars.push(bar),bar.$watch("value",function(value){bar.percent=+(100*value/$scope.max).toFixed(2)
}),bar.$on("$destroy",function(){element=null,self.removeBar(bar)})},this.removeBar=function(bar){this.bars.splice(this.bars.indexOf(bar),1)}}]).directive("attProgressBar",function(){return{restrict:"EA",replace:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"templates/attProgressBar.html",link:function(scope,element,attrs,progressCtrl){attrs.max&&scope.value>scope.$parent.$eval(attrs.max)&&(scope.value=attrs.max),progressCtrl.addBar(scope,angular.element(element.children()[0]))}}}),angular.module("connectedCarSDK.attSimError",[]).directive("attSimError",[function(){return{restrict:"E",replace:!0,templateUrl:"templates/attSimError.html",link:function(scope,iElm,iAttrs,controller){console.log("Params: ",scope,iElm,iAttrs,controller)}}}]),angular.module("connectedCarSDK.attSlider",[]).directive("attSlider",[function(){return{restrict:"EA",templateUrl:"templates/attSlider.html",scope:{type:"@",ngModel:"=",min:"@",max:"@",textLeft:"@",textRight:"@",parentControl:"@"},link:function(scope,element){scope.min=scope.min||0,scope.max=scope.max||100,scope.ngModel=scope.ngModel||0;var input=element.find("input");if(input&&input.length>0){var value=(scope.ngModel-scope.min)/(scope.max-scope.min);input[0].style.backgroundImage=["-webkit-gradient(","linear, ","left top, ","right top, ","color-stop("+value+", "+getComputedStyle(input[0]).backgroundColor+"), ","color-stop("+value+", #ffffff)",")"].join("")}scope.sliderMovingTime=200,scope.sliderMoved=!1,scope.sliderMoved=function(){scope.$emit("sliderMoved",scope.parentControl)},scope.sliderMoving=function(){scope.$emit("sliderMoving",scope.parentControl)};var slider=element.find("input");slider.bind("touchstart",function(){scope.$emit("sliderMoving",scope.parentControl),this.focus()}),slider.bind("touchend",function(){scope.$emit("sliderMoved",scope.parentControl),this.focus()}),scope.$watch(function(){return scope.ngModel},function(){if(input&&input.length>0){var gradStop=(scope.ngModel-scope.min)/(scope.max-scope.min);input[0].style.backgroundImage=["-webkit-gradient(","linear, ","left top, ","right top, ","color-stop("+gradStop+", "+getComputedStyle(input[0]).backgroundColor+"), ","color-stop("+gradStop+", #ffffff)",")"].join("")}})}}}]),angular.module("connectedCarSDK.attTab",["connectedCarSDK.attTabset"]).directive("attTab",["$parse",function($parse){return{require:"^attTabset",restrict:"EA",replace:!0,templateUrl:"templates/tabs/attTab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(elm,attrs,transclude){return function(scope,elm,attrs,tabsetCtrl){scope.$watch("active",function(active){active&&tabsetCtrl.select(scope)}),scope.disabled=!1,attrs.disabled&&scope.$parent.$watch($parse(attrs.disabled),function(value){scope.disabled=!!value}),scope.select=function(){scope.disabled||(scope.active=!0)},tabsetCtrl.addTab(scope),scope.$on("$destroy",function(){tabsetCtrl.removeTab(scope)}),scope.$transcludeFn=transclude}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^attTab",link:function(scope,elm){scope.$watch("headingElement",function(heading){heading&&(elm.html(""),elm.append(heading))})}}}]).directive("tabContentTransclude",function(){function isTabHeading(node){return node.tagName&&(node.hasAttribute("tab-heading")||node.hasAttribute("data-tab-heading")||"tab-heading"===node.tagName.toLowerCase()||"data-tab-heading"===node.tagName.toLowerCase())}return{restrict:"A",require:"^attTabset",link:function(scope,elm,attrs){var tab=scope.$eval(attrs.tabContentTransclude);tab.$transcludeFn(tab.$parent,function(contents){angular.forEach(contents,function(node){isTabHeading(node)?tab.headingElement=node:elm.append(node)})})}}}),angular.module("connectedCarSDK.attTabset",[]).controller("TabsetController",["$scope",function($scope){var ctrl=this,tabs=ctrl.tabs=$scope.tabs=[];ctrl.select=function(selectedTab){angular.forEach(tabs,function(tab){tab.active&&tab!==selectedTab&&(tab.active=!1,tab.onDeselect())}),selectedTab.active=!0,selectedTab.onSelect()},ctrl.addTab=function(tab){tabs.push(tab),1===tabs.length?tab.active=!0:tab.active&&ctrl.select(tab)},ctrl.removeTab=function(tab){var index=tabs.indexOf(tab);if(tab.active&&tabs.length>1){var newActiveIndex=index===tabs.length-1?index-1:index+1;ctrl.select(tabs[newActiveIndex])}tabs.splice(index,1)}}]).directive("attTabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"templates/tabs/attTabset.html",link:function(scope,element,attrs){scope.vertical=angular.isDefined(attrs.vertical)?scope.$parent.$eval(attrs.vertical):!1,scope.justified=angular.isDefined(attrs.justified)?scope.$parent.$eval(attrs.justified):!1,scope.topPosition=angular.isDefined(attrs.topPosition)?scope.$parent.$eval(attrs.topPosition):!1}}}),angular.module("connectedCarSDK.attToggleSwitch",[]).directive("attToggleSwitch",function(){return{templateUrl:"templates/attToggleSwitch.html",restrict:"E",scope:{ngModel:"=",onChange:"&"},require:"^ngModel",link:function(scope,element,attrs){!angular.isDefined(attrs.disabled)||"true"!==attrs.disabled&&""!==attrs.disabled||element.find("*").attr("disabled","disabled"),scope.click=function(enabled){scope.ngModel=enabled},scope.$watch("ngModel",function(newValue,oldValue){angular.isDefined(oldValue)&&newValue!==oldValue&&scope.onChange()})}}}),angular.module("connectedCarSDK.attVehicleInMotion",[]).directive("attVehicleInMotion",[function(){return{restrict:"E",replace:"true",templateUrl:"templates/attVehicleInMotion.html",link:function(scope,iElm,iAttrs,controller){console.log("Properties: ",scope,iElm,iAttrs,controller)}}}]);